<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comunicazione Crittografica Sicura</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsencrypt/3.3.2/jsencrypt.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>🔐 Comunicazione Crittografica Sicura</h1>
            <p>Comunica in modo sicuro utilizzando crittografia asimmetrica RSA</p>
        </header>

        <main>
            <!-- Sezione Generazione Chiavi -->
            <section class="key-section">
                <h2>🔑 Gestione Chiavi</h2>
                
                <!-- Opzioni Chiavi -->
                <div class="key-options">
                    <div class="option-card">
                        <h3>🆕 Genera Nuove Chiavi</h3>
                        <p>Crea una nuova coppia di chiavi RSA</p>
                        <button id="generateKeys" class="btn btn-primary">Genera Chiavi</button>
                    </div>
                    
                    <div class="option-card">
                        <h3>📁 Carica Chiavi Esistenti</h3>
                        <p>Importa chiavi già generate</p>
                        <button id="importKeys" class="btn btn-secondary">Importa Chiavi</button>
                    </div>
                    
                    <div class="option-card">
                        <h3>💾 Salva Chiavi</h3>
                        <p>Esporta le tue chiavi per backup</p>
                        <button id="exportKeys" class="btn btn-secondary">Esporta Chiavi</button>
                    </div>
                </div>
                
                <!-- Inserimento Manuale Chiavi -->
                <div class="manual-keys">
                    <h3>✏️ Inserisci Chiavi Manualmente</h3>
                    <div class="keys-input">
                        <div class="key-input-group">
                            <label for="manualPublicKey">Chiave Pubblica:</label>
                            <textarea id="manualPublicKey" placeholder="Incolla qui la tua chiave pubblica..."></textarea>
                        </div>
                        
                        <div class="key-input-group">
                            <label for="manualPrivateKey">Chiave Privata:</label>
                            <textarea id="manualPrivateKey" placeholder="Incolla qui la tua chiave privata..."></textarea>
                        </div>
                        
                        <button id="setManualKeys" class="btn btn-success">✅ Imposta Chiavi</button>
                    </div>
                </div>
                
                <!-- Visualizzazione Chiavi -->
                <div class="keys-display" id="keysDisplay" style="display: none;">
                    <div class="key-pair">
                        <h3>🔓 Chiave Pubblica</h3>
                        <textarea id="publicKey" placeholder="La tua chiave pubblica apparirà qui..." readonly></textarea>
                        <button id="copyPublicKey" class="btn btn-small">📋 Copia</button>
                    </div>
                    
                    <div class="key-pair">
                        <h3>🔒 Chiave Privata</h3>
                        <textarea id="privateKey" placeholder="La tua chiave privata apparirà qui..." readonly></textarea>
                        <button id="copyPrivateKey" class="btn btn-small">📋 Copia</button>
                    </div>
                </div>
            </section>

            <!-- Sezione Messaggi -->
            <section class="message-section">
                <h2>💬 Messaggi</h2>
                
                <div class="message-tabs">
                    <button class="tab-btn active" data-tab="send">📤 Invia</button>
                    <button class="tab-btn" data-tab="receive">📥 Ricevi</button>
                </div>
                
                <!-- Invio Messaggi -->
                <div class="tab-content active" id="send-tab">
                    <div class="message-input">
                        <div class="input-group">
                            <label for="recipientPublicKey">🔑 Chiave Pubblica del Destinatario:</label>
                            <textarea id="recipientPublicKey" placeholder="Incolla qui la chiave pubblica del destinatario..."></textarea>
                        </div>
                        
                        <div class="input-group">
                            <label for="messageToSend">💬 Messaggio da Inviare:</label>
                            <textarea id="messageToSend" placeholder="Scrivi il tuo messaggio qui..."></textarea>
                        </div>
                        
                        <button id="encryptAndSend" class="btn btn-success">🔒 Cifra Messaggio</button>
                        
                        <div class="encrypted-message" id="encryptedResult" style="display: none;">
                            <label for="encryptedMessage">📦 Messaggio Cifrato:</label>
                            <textarea id="encryptedMessage" placeholder="Il messaggio cifrato apparirà qui..." readonly></textarea>
                            <button id="copyEncrypted" class="btn btn-small">📋 Copia</button>
                        </div>
                    </div>
                </div>

                <!-- Ricezione Messaggi -->
                <div class="tab-content" id="receive-tab">
                    <div class="message-output">
                        <div class="input-group">
                            <label for="encryptedMessageReceived">📦 Messaggio Cifrato Ricevuto:</label>
                            <textarea id="encryptedMessageReceived" placeholder="Incolla qui il messaggio cifrato ricevuto..."></textarea>
                        </div>
                        
                        <button id="decryptMessage" class="btn btn-info">🔓 Decifra Messaggio</button>
                        
                        <div class="decrypted-message" id="decryptedResult" style="display: none;">
                            <label for="decryptedMessage">💬 Messaggio Decifrato:</label>
                            <textarea id="decryptedMessage" placeholder="Il messaggio decifrato apparirà qui..." readonly></textarea>
                            <button id="copyDecrypted" class="btn btn-small">📋 Copia</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Sezione Istruzioni -->
            <section class="instructions">
                <h2>📖 Guida Rapida</h2>
                <div class="instructions-content">
                    <div class="instruction-step">
                        <h4>1. 🔑 Genera o Carica Chiavi</h4>
                        <p>Genera nuove chiavi o carica quelle esistenti. La chiave pubblica può essere condivisa, quella privata deve rimanere segreta.</p>
                    </div>
                    
                    <div class="instruction-step">
                        <h4>2. 📤 Invia Messaggio</h4>
                        <p>Inserisci la chiave pubblica del destinatario, scrivi il messaggio e cifralo. Copia il risultato e invialo.</p>
                    </div>
                    
                    <div class="instruction-step">
                        <h4>3. 📥 Ricevi Messaggio</h4>
                        <p>Incolla il messaggio cifrato ricevuto e decifralo con la tua chiave privata.</p>
                    </div>
                    
                    <div class="instruction-step">
                        <h4>⚠️ Sicurezza</h4>
                        <p>Tutto avviene localmente nel browser. Le tue chiavi private non lasciano mai il dispositivo!</p>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>🔒 Comunicazione Crittografica Sicura - Utilizza crittografia RSA per comunicazioni private</p>
            <p><strong>© 2025 Alesx - Tutti i diritti riservati</strong></p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html> 